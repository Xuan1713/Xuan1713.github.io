<!--
Êó•ÂéÜ
ÁâàÊú¨: v1.0.0
‰ΩúËÄÖ: Xuan1713
Áä∂ÊÄÅ: Ê≠£Âú®ÂÆåÂñÑÂäüËÉΩ
ÊèèËø∞: Â∞±ÊòØ‰∏™Êó•ÂéÜÔºå‰ΩÜÊòØ‰∏çÁî®APIÔºåÈÄÇÈÖçËß¶Â±èËÆæÂ§á
-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êó•ÂéÜ</title>
    <script src="https://cdn.jsdelivr.net/npm/chinese-days/dist/index.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-hover: #4f46e5;
            --gold: #d4af37;
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.18);
            --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0;
            --holiday-bg: rgba(196, 30, 58, 0.2);
            --term-color: #4ecdc4;
            --header-bg: rgba(0, 0, 0, 0.3);
            --setting-btn-bg: #4f46e5;
            --input-bg: rgba(255, 255, 255, 0.1);
            --base-scale: 1;
        }

        [data-theme="light"] {
            --bg-gradient: linear-gradient(135deg, #e8e8e8 0%, #f0f0f0 100%);
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(0, 0, 0, 0.1);
            --text-primary: #2c3e50;
            --text-secondary: #666;
            --header-bg: rgba(255, 255, 255, 0.5);
            --input-bg: rgba(0, 0, 0, 0.05);
        }

        html {
            min-width: 1000px;
            overflow-x: auto;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: auto;
            position: relative;
            transition: background 0.3s ease;
            font-size: 16px;
            zoom: var(--base-scale);
        }

        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 1000;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-btn {
            background: transparent;
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 6px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .nav-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 80px 20px 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2em;
            background: linear-gradient(45deg, var(--gold), #fff, var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            letter-spacing: 0.1em;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 0.875em;
            letter-spacing: 0.2em;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            align-items: start;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .glass-card:last-child {
            margin-bottom: 0;
        }

        .left-panel {
            position: sticky;
            top: 70px;
            height: calc(100vh - 90px);
            overflow-y: auto;
        }

        .card-title {
            font-size: 0.8125em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 10px;
        }

        .today-info .date-main {
            text-align: center;
            margin-bottom: 15px;
        }

        .today-info .solar-date {
            font-size: 3em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: 5px;
        }

        .today-info .solar-weekday {
            color: var(--gold);
            font-size: 0.875em;
            margin-bottom: 10px;
        }

        .today-info .lunar-info-box {
            background: rgba(212, 175, 55, 0.1);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
        }

        .today-info .lunar-date {
            font-size: 1.125em;
            color: var(--gold);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .today-info .ganzhi-info {
            font-size: 0.75em;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .today-info .zodiac-tag {
            display: inline-block;
            background: rgba(196, 30, 58, 0.2);
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            color: var(--primary-light);
        }

        .festivals-box {
            margin-top: 15px;
        }

        .festival-tag {
            display: inline-block;
            background: rgba(78, 205, 196, 0.2);
            color: var(--term-color);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            margin: 3px;
            border: 1px solid rgba(78, 205, 196, 0.3);
        }

        .festival-tag.holiday {
            background: rgba(196, 30, 58, 0.2);
            color: #ff6b6b;
            border-color: rgba(196, 30, 58, 0.3);
        }

        .term-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--glass-border);
        }

        .term-item:last-child {
            border-bottom: none;
        }

        .term-name {
            font-size: 0.875em;
            color: var(--text-primary);
        }

        .term-date {
            font-size: 0.75em;
            color: var(--term-color);
            background: rgba(78, 205, 196, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
        }

        .term-item.current .term-name {
            color: var(--gold);
            font-weight: 700;
        }

        /* ÈÄâ‰∏≠Êó•Êúü */
        .selected-info .selected-date-main {
            text-align: center;
            margin-bottom: 15px;
        }

        .selected-info .extra-info-row {
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .selected-info .extra-info-row .detail-label {
            font-size: 0.6875em;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .selected-info .extra-info-row .detail-value {
            font-size: 0.875em;
            color: var(--text-primary);
            font-weight: 600;
        }

        .selected-info .solar-display {
            font-size: 2.25em;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: 5px;
        }

        .selected-info .weekday-display {
            color: var(--gold);
            font-size: 0.875em;
            margin-bottom: 10px;
        }

        .selected-info .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .selected-info .detail-item.full-width {
            grid-column: 1 / -1;
        }

        .selected-info .detail-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .selected-info .detail-label {
            font-size: 0.6875em;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .selected-info .detail-value {
            font-size: 0.875em;
            color: var(--text-primary);
            font-weight: 600;
        }

        .selected-info .full-ganzhi {
            grid-column: 1 / -1;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        /* Êó•ÂéÜ */
        .calendar-section {
            min-width: 0;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .month-year-display {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text-primary);
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .cal-nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 1em;
        }

        .cal-nav-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .cal-nav-btn.today-btn {
            width: auto;
            padding: 0 16px;
            font-size: 0.875em;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .weekday-header {
            text-align: center;
            padding: 12px;
            color: var(--text-secondary);
            font-size: 0.8125em;
            font-weight: 500;
            text-transform: uppercase;
        }

        .weekday-header.weekend {
            color: var(--primary);
        }

        .calendar-day {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid transparent;
            border-radius: 12px;
            padding: 8px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
            min-height: 80px;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border-color: var(--glass-border);
        }

        [data-theme="light"] .calendar-day {
            background: rgba(255, 255, 255, 0.5);
        }

        [data-theme="light"] .calendar-day:hover {
            background: rgba(255, 255, 255, 0.8);
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .calendar-day.today {
            background: rgba(212, 175, 55, 0.15);
            border-color: var(--gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .calendar-day.holiday {
            background: var(--holiday-bg);
            border-color: rgba(196, 30, 58, 0.3);
        }

        .calendar-day.holiday .solar-num {
            color: #ff6b6b;
            font-weight: 700;
        }

        .calendar-day.selected {
            background: rgba(78, 205, 196, 0.2);
            border-color: var(--term-color);
            box-shadow: 0 0 0 2px var(--term-color);
        }

        .solar-num {
            font-size: 1.125em;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1;
            margin-bottom: 4px;
        }

        .lunar-num {
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        .day-badges {
            position: absolute;
            top: 6px;
            right: 6px;
            display: flex;
            gap: 3px;
        }

        .badge {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .badge.holiday { background: #ff6b6b; }
        .badge.term { background: var(--term-color); }

        .work-indicator {
            position: absolute;
            top: 6px;
            left: 6px;
            font-size: 0.625em;
            padding: 2px 5px;
            border-radius: 4px;
            font-weight: 700;
        }

        .work-indicator.work {
            background: #2ecc71;
            color: white;
        }

        .work-indicator.rest {
            background: var(--primary);
            color: white;
        }

        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            border-top: 1px solid var(--glass-border);
            color: var(--text-secondary);
            font-size: 0.75em;
        }

        footer a {
            color: var(--gold);
            text-decoration: none;
        }

        /* ËÆæÁΩÆÈù¢Êùø */
        .settings-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .settings-overlay.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .settings-modal {
            background: #1e1e2e;
            border-radius: 12px;
            width: 90%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            color: #fff;
        }

        [data-theme="light"] .settings-modal {
            background: #fff;
            color: #333;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        [data-theme="light"] .settings-header {
            border-bottom-color: rgba(0, 0, 0, 0.1);
        }

        .settings-title {
            font-size: 1.125em;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: #999;
            font-size: 24px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        [data-theme="light"] .close-btn:hover {
            background: rgba(0, 0, 0, 0.05);
            color: #333;
        }

        .settings-body {
            padding: 24px;
        }

        .setting-section {
            margin-bottom: 28px;
        }

        .setting-section:last-child {
            margin-bottom: 0;
        }

        .section-title {
            font-size: 0.875em;
            color: #999;
            margin-bottom: 12px;
            font-weight: 500;
        }

        [data-theme="light"] .section-title {
            color: #666;
        }

        /* ‰∏ªÈ¢òËÆæÁΩÆ */
        .theme-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 12px;
        }

        .theme-btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            background: #4f46e5;
            color: white;
            font-size: 0.875em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .theme-btn:hover {
            background: #4338ca;
            transform: translateY(-1px);
        }

        .theme-btn.active {
            box-shadow: 0 0 0 2px #818cf8;
        }

        .follow-system {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.875em;
            color: #ccc;
        }

        [data-theme="light"] .follow-system {
            color: #666;
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: #4b5563;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #4f46e5;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active::after {
            transform: translateX(20px);
        }

        /* Â≠ó‰ΩìËÆæÁΩÆ */
        .font-size-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .size-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 6px;
            background: #4f46e5;
            color: white;
            font-size: 0.875em;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 50px;
        }

        .size-btn:hover {
            background: #4338ca;
        }

        .size-btn.active {
            box-shadow: 0 0 0 2px #818cf8;
        }

        .custom-font {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .custom-label {
            font-size: 0.875em;
            color: #ccc;
        }

        [data-theme="light"] .custom-label {
            color: #666;
        }

        .font-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .font-input {
            width: 80px;
            padding: 6px 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            background: var(--input-bg);
            color: var(--text-primary);
            font-size: 0.875em;
            text-align: center;
        }

        [data-theme="light"] .font-input {
            border-color: rgba(0, 0, 0, 0.2);
        }

        .font-unit {
            font-size: 0.875em;
            color: #999;
        }

        .apply-btn {
            padding: 6px 16px;
            border: none;
            border-radius: 6px;
            background: #4f46e5;
            color: white;
            font-size: 0.875em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .apply-btn:hover {
            background: #4338ca;
        }

        .current-font {
            font-size: 0.8125em;
            color: #888;
        }

        [data-theme="light"] .current-font {
            color: #999;
        }

        /* ÂÖ≥‰∫éÈÉ®ÂàÜ */
        .about-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 16px;
            font-size: 0.8125em;
            line-height: 1.8;
        }

        [data-theme="light"] .about-content {
            background: rgba(0, 0, 0, 0.03);
        }

        .about-item {
            display: flex;
            margin-bottom: 4px;
        }

        .about-label {
            color: #888;
            min-width: 80px;
        }

        [data-theme="light"] .about-label {
            color: #666;
        }

        .about-value {
            color: #fff;
            flex: 1;
        }

        [data-theme="light"] .about-value {
            color: #333;
        }

        .about-value a {
            color: #818cf8;
            text-decoration: none;
        }

        .about-value a:hover {
            text-decoration: underline;
        }

        .about-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        [data-theme="light"] .about-section {
            border-top-color: rgba(0, 0, 0, 0.1);
        }

        .about-title {
            font-size: 0.8125em;
            color: #888;
            margin-bottom: 8px;
        }

        [data-theme="light"] .about-title {
            color: #666;
        }

        .about-list {
            list-style: disc;
            padding-left: 20px;
            color: #ccc;
            font-size: 0.75em;
        }

        [data-theme="light"] .about-list {
            color: #666;
        }

        .about-list li {
            margin-bottom: 4px;
        }

        .about-list a {
            color: #818cf8;
            text-decoration: none;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-links">
            <button class="nav-btn" onclick="openSettings()">‚öôÔ∏è ËÆæÁΩÆ</button>
            <a href="../index.html" target="_blank" class="nav-btn">ËøîÂõû‰∏ªÈ°µ</a>
        </div>
    </nav>

    <div class="container">
        <header>
            <h1>Êó•ÂéÜ</h1>
        </header>

        <div class="main-layout">
            <aside class="left-panel">
                <div class="glass-card today-info">
                    <div class="card-title">üìÖ ‰ªäÊó•‰ø°ÊÅØ</div>
                    <div class="date-main">
                        <div class="solar-date" id="todaySolar">--</div>
                        <div class="solar-weekday" id="todayWeekday">--</div>
                        <div class="lunar-info-box">
                            <div class="lunar-date" id="todayLunar">--</div>
                            <div class="ganzhi-info" id="todayGanzhi">--</div>
                            <div class="zodiac-tag" id="todayZodiac">--</div>
                        </div>
                    </div>
                    <div class="festivals-box">
                        <div class="card-title" style="margin-top: 0; border: none; padding-bottom: 5px;">üéâ ‰ªäÊó•ËäÇÊó• / ËäÇÊ∞î</div>
                        <div id="todayFestivals">
                            <span style="color: var(--text-secondary); font-size: 12px;">Êó†ÁâπÊÆäËäÇÊó•</span>
                        </div>
                    </div>
                </div>

                <div class="glass-card">
                    <div class="card-title">üåæ Êú¨ÊúàËäÇÊ∞î</div>
                    <div id="monthTerms"></div>
                </div>

                <div class="glass-card selected-info">
                    <div class="card-title">üìç ÈÄâ‰∏≠ÁöÑÊó•Êúü</div>
                    <div class="selected-date-main">
                        <div class="solar-display" id="selectedSolar">--</div>
                        <div class="weekday-display" id="selectedWeekday">--</div>
                    </div>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <div class="detail-label">ÂÜúÂéÜ</div>
                            <div class="detail-value" id="selectedLunar">--</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">ÁîüËÇñ</div>
                            <div class="detail-value" id="selectedZodiac">--</div>
                        </div>
                        <div class="detail-item full-ganzhi">
                            <div class="detail-label">Âπ≤ÊîØÁ∫™Âπ¥</div>
                            <div class="detail-value" id="selectedGanzhi">--</div>
                        </div>
                    </div>
                    <!-- ËäÇÊ∞î -->
                    <div class="extra-info-row">
                        <div class="detail-label">ËäÇÊ∞î</div>
                        <div class="detail-value" id="selectedTerms">--</div>
                    </div>
                    <!-- ËäÇÊó•Ôºà‰∏ªË¶ÅÔºâ -->
                    <div class="extra-info-row">
                        <div class="detail-label">ËäÇÊó•</div>
                        <div class="detail-value" id="selectedMainFestival" style="color: #ff6b6b;">--</div>
                    </div>
                    <!-- ÂÖ∂‰ªñÔºàÈ∏°Êó•Á≠âÔºâ -->
                    <div class="extra-info-row">
                        <div class="detail-label">ÂÖ∂‰ªñ</div>
                        <div class="detail-value" id="selectedOtherInfo">--</div>
                    </div>
                </div>
            </aside>

            <section class="calendar-section">
                <div class="glass-card" style="min-height: calc(100vh - 200px);">
                    <div class="calendar-header">
                        <div class="month-year-display">
                            <span id="currentYear">2026</span>Âπ¥ 
                            <span id="currentMonth">2</span>Êúà
                        </div>
                        <div class="calendar-nav">
                            <button class="cal-nav-btn" onclick="changeMonth(-1)">‚Äπ</button>
                            <button class="cal-nav-btn today-btn" onclick="goToToday()">‰ªäÂ§©</button>
                            <button class="cal-nav-btn" onclick="changeMonth(1)">‚Ä∫</button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                </div>
            </section>
        </div>

        <footer>
            <p>Version 1.0.0[Beta] | <a href="https://github.com/Xuan1713" target="_blank">Xuan1713</a>ËÆæËÆ°„ÄÅÂºÄÂèë</p>
        </footer>
    </div>

    <!-- ËÆæÁΩÆÈù¢Êùø -->
    <div class="settings-overlay" id="settingsOverlay" onclick="closeSettingsOnOverlay(event)">
        <div class="settings-modal" onclick="event.stopPropagation()">
            <div class="settings-header">
                <h2 class="settings-title">ËÆæÁΩÆ</h2>
                <button class="close-btn" onclick="closeSettings()">√ó</button>
            </div>
            
            <div class="settings-body">
                <!-- ‰∏ªÈ¢òËÆæÁΩÆ -->
                <div class="setting-section">
                    <div class="section-title">‰∏ªÈ¢òËÆæÁΩÆ</div>
                    <div class="theme-buttons">
                        <button class="theme-btn" id="btnLight" onclick="setTheme('light')">ÁôΩÊòºÊ®°Âºè</button>
                        <button class="theme-btn" id="btnDark" onclick="setTheme('dark')">ÈªëÂ§úÊ®°Âºè</button>
                    </div>
                    <div class="follow-system">
                        <div class="toggle-switch" id="followSystem" onclick="toggleFollowSystem()"></div>
                        <span>Ë∑üÈöèÁ≥ªÁªü‰∏ªÈ¢ò</span>
                    </div>
                </div>

                <!-- Â≠ó‰ΩìÂ§ßÂ∞è -->
                <div class="setting-section">
                    <div class="section-title">Â≠ó‰ΩìÂ§ßÂ∞è</div>
                    <div class="font-size-buttons">
                        <button class="size-btn" onclick="setFontSize(14, this)">Â∞è</button>
                        <button class="size-btn active" onclick="setFontSize(16, this)">‰∏≠</button>
                        <button class="size-btn" onclick="setFontSize(18, this)">Â§ß</button>
                    </div>
                    <div class="custom-font">
                        <span class="custom-label">Ëá™ÂÆö‰πâ</span>
                        <div class="font-input-wrapper">
                            <input type="number" class="font-input" id="customFontSize" placeholder="16" min="10" max="32">
                            <span class="font-unit">px</span>
                            <button class="apply-btn" onclick="applyCustomFont()">Â∫îÁî®</button>
                        </div>
                    </div>
                    <div class="current-font">ÂΩìÂâçÂ≠ó‰Ωì: <span id="currentFontDisplay">16px</span></div>
                </div>

                <!-- ÂÖ≥‰∫é -->
                <div class="setting-section">
                    <div class="section-title">ÂÖ≥‰∫é</div>
                    <div class="about-content">
                        <div class="about-item">
                            <span class="about-label">È°πÁõÆÂêçÁß∞Ôºö</span>
                            <span class="about-value">Êó•ÂéÜ</span>
                        </div>
                        <div class="about-item">
                            <span class="about-label">ÁâàÊú¨Ôºö</span>
                            <span class="about-value">1.0.0[Beta]</span>
                        </div>
                        <div class="about-item">
                            <span class="about-label">ÂºÄÂèëËÄÖÔºö</span>
                            <span class="about-value">Xuan1713</span>
                        </div>
                        <div class="about-item">
                            <span class="about-label">Êõ¥Êñ∞Êó∂Èó¥Ôºö</span>
                            <span class="about-value">2026-02-06</span>
                        </div>
                        <div class="about-item">
                            <span class="about-label">È°πÁõÆÁä∂ÊÄÅÔºö</span>
                            <span class="about-value">ÂºÄÂèë‰∏≠ÔºåÊåÅÁª≠‰ºòÂåñ</span>
                        </div>
                        <div class="about-item">
                            <span class="about-label">TipsÔºö</span>
                            <span class="about-value">Âæà‰πÖ‰πãÂâçÁöÑ‰ΩúÂìÅÔºåÂèØËÉΩÊúâbug</span>
                        </div>
                        
                        <div class="about-section">
                            <div class="about-title">ÂºÄÂèëËØ¥Êòé</div>
                            <div style="color: #aaa; font-size: 0.75em; line-height: 1.6;">
                                Êú¨È°πÁõÆÂú®ÂºÄÂèëËøáÁ®ã‰∏≠‰ΩøÁî®‰∫Ü‰ª•‰∏ãËµÑÊ∫êÔºö
                                <ul class="about-list">
                                    <li>Êó•ÂéÜÂíåÂÜúÂéÜÊï∞ÊçÆÊù•Ëá™ <a href="https://github.com/vsme/chinese-days" target="_blank">chinese-days</a> ÂºÄÊ∫êÂ∫ì</li>
                                </ul>
                                <p style="margin-top: 8px; color: #888;">‰ΩúËÄÖÂØπÈ°πÁõÆÁöÑÊï¥‰ΩìËÆæËÆ°„ÄÅÊû∂ÊûÑ„ÄÅÊ†∏ÂøÉÁÆóÊ≥ïÊã•ÊúâËëó‰ΩúÊùÉ„ÄÇ</p>
                            </div>
                        </div>

                        <div class="about-section" style="text-align: center; padding-top: 12px;">
                            <a href="https://github.com/Xuan1713" target="_blank" style="display: inline-flex; align-items: center; gap: 6px; color: #818cf8; text-decoration: none; font-size: 0.8125em;">
                                <svg height="16" viewBox="0 0 16 16" width="16" fill="currentColor">
                                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                                </svg>
                                ËÆøÈóÆ‰ΩúËÄÖÁöÑ GitHub ‰∏ªÈ°µ
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { getLunarDate, getSolarTerms, getLunarFestivals, getDayDetail } = chineseDays;
        
        let currentDate = new Date();
        let selectedDate = new Date();
        let currentFontSize = 16;
        let followSystemTheme = false;
        const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];
        const cache = new Map();

        const systemDarkMode = window.matchMedia('(prefers-color-scheme: dark)');

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const savedFollowSystem = localStorage.getItem('followSystem') === 'true';
            const savedFontSize = localStorage.getItem('fontSize');
            
            currentFontSize = savedFontSize ? parseInt(savedFontSize) : 16;
            followSystemTheme = savedFollowSystem;
            
            applyFontSize(currentFontSize);
            
            if (followSystemTheme) {
                const isDark = systemDarkMode.matches;
                setTheme(isDark ? 'dark' : 'light', true);
                document.getElementById('followSystem').classList.add('active');
            } else {
                setTheme(savedTheme, true);
            }
            
            updateFontButtons();
            updateThemeButtons();
            updateTodayInfo();
            renderCalendar();
            updateSelectedInfo(selectedDate);

            systemDarkMode.addEventListener('change', (e) => {
                if (followSystemTheme) {
                    setTheme(e.matches ? 'dark' : 'light', true);
                }
            });

            window.addEventListener('resize', adjustScale);
            adjustScale();
        });

        function adjustScale() {
            const width = window.innerWidth;
            let scale = 1;
            
            if (width < 1200) {
                scale = width / 1200;
            }
            
            document.documentElement.style.setProperty('--base-scale', scale);
            
            if ('zoom' in document.body.style) {
                document.body.style.zoom = scale;
            } else {
                document.body.style.transform = `scale(${scale})`;
                document.body.style.transformOrigin = 'top center';
                document.body.style.width = `${100 / scale}%`;
            }
        }

        function getCacheKey(date) {
            return date.toISOString().split('T')[0];
        }

        function getLunarData(date) {
            const key = getCacheKey(date);
            if (!cache.has(key)) {
                try {
                    const data = getLunarDate(date);
                    cache.set(key, data);
                    return data;
                } catch (e) {
                    return null;
                }
            }
            return cache.get(key);
        }

        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function updateTodayInfo() {
            const today = new Date();
            const lunarData = getLunarData(today);
            const dayDetail = getDayDetail(today);
            
            document.getElementById('todaySolar').textContent = today.getDate();
            document.getElementById('todayWeekday').textContent = `ÊòüÊúü${weekDays[today.getDay()]} ¬∑ ${today.getFullYear()}Âπ¥${today.getMonth() + 1}Êúà`;
            
            if (lunarData) {
                document.getElementById('todayLunar').textContent = `${lunarData.lunarMonCN}${lunarData.lunarDayCN}`;
                document.getElementById('todayGanzhi').textContent = `${lunarData.yearCyl}Âπ¥ ${lunarData.monCyl}Êúà ${lunarData.dayCyl}Êó•`;
                document.getElementById('todayZodiac').textContent = `${lunarData.zodiac}Âπ¥`;
            }

            const container = document.getElementById('todayFestivals');
            const festivals = getLunarFestivals(today, today);
            const terms = getSolarTerms(today, today);
            
            let html = '';
            terms.forEach(term => {
                html += `<span class="festival-tag">${term.name}</span>`;
            });
            
            if (festivals && festivals.length > 0) {
                festivals[0].name.forEach(name => {
                    html += `<span class="festival-tag holiday">${name}</span>`;
                });
            }
            
            if (dayDetail && dayDetail.name && !dayDetail.work) {
                if (!html.includes(dayDetail.name.split(',')[0])) {
                    html += `<span class="festival-tag holiday">${dayDetail.name.split(',')[0]}</span>`;
                }
            }
            
            container.innerHTML = html || '<span style="color: var(--text-secondary); font-size: 12px;">Êó†ÁâπÊÆäËäÇÊó•</span>';
        }

        function updateSelectedInfo(date) {
            const lunarData = getLunarData(date);
            const dayDetail = getDayDetail(date);
            const terms = getSolarTerms(date, date);
            const festivals = getLunarFestivals(date, date);
            let mainFestival = ''; 
            let otherInfo = [];    

            if (festivals && festivals.length > 0) {
                const allNames = festivals[0].name;
                allNames.forEach(name => {
                    if (name.includes('Êò•ËäÇ') || name.includes('Festival') || 
                        name.includes('ËäÇ') || name.includes('ÂÖÉÊó¶') || 
                        name.includes('ÂÖÉÂÆµ') || name.includes('Á´ØÂçà') || 
                        name.includes('‰∏≠Áßã') || name.includes('Ê∏ÖÊòé') ||
                        name.includes('Âä≥Âä®') || name.includes('ÂõΩÂ∫Ü')) {
                        if (mainFestival) mainFestival += '„ÄÅ';
                        mainFestival += name;
                    } else {
                        otherInfo.push(name);
                    }
                });
            }
            if (dayDetail && dayDetail.name) {
                const holidayName = dayDetail.name.split(',')[0];
                if (!mainFestival.includes(holidayName)) {
                    if (mainFestival) mainFestival += '„ÄÅ';
                    mainFestival += holidayName;
                }
            }

            document.getElementById('selectedMainFestival').textContent = mainFestival || 'Êó†';
            document.getElementById('selectedOtherInfo').textContent = otherInfo.join('„ÄÅ') || 'Êó†';
            
            const termText = terms.length > 0 ? terms.map(t => t.name).join('„ÄÅ') : 'Êó†';
            document.getElementById('selectedTerms').textContent = termText;
            document.getElementById('selectedSolar').textContent = date.getDate();
            document.getElementById('selectedWeekday').textContent = `ÊòüÊúü${weekDays[date.getDay()]} ¬∑ ${date.getFullYear()}Âπ¥${date.getMonth() + 1}Êúà`;
            
            if (lunarData) {
                document.getElementById('selectedLunar').textContent = `${lunarData.lunarMonCN}${lunarData.lunarDayCN}`;
                document.getElementById('selectedZodiac').textContent = lunarData.zodiac;
                document.getElementById('selectedGanzhi').textContent = `${lunarData.yearCyl}Âπ¥ ${lunarData.monCyl}Êúà ${lunarData.dayCyl}Êó•`;
            }
            
        }

        function updateMonthTerms() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth() + 1;
            const start = new Date(year, month - 1, 1);
            const end = new Date(year, month, 0);
            
            const terms = getSolarTerms(start, end);
            const container = document.getElementById('monthTerms');
            
            let html = '';
            if (terms.length === 0) {
                html = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">Êú¨ÊúàÊó†ËäÇÊ∞î‰∫§Êé•</div>';
            } else {
                terms.forEach((term) => {
                    const isCurrent = new Date().toDateString() === new Date(term.date).toDateString();
                    html += `
                        <div class="term-item ${isCurrent ? 'current' : ''}">
                            <div class="term-name">${term.name}</div>
                            <div class="term-date">${new Date(term.date).getMonth() + 1}Êúà${new Date(term.date).getDate()}Êó•</div>
                        </div>
                    `;
                });
            }
            container.innerHTML = html;
        }

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            document.getElementById('currentYear').textContent = year;
            document.getElementById('currentMonth').textContent = month + 1;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const prevLastDay = new Date(year, month, 0);
            
            const startPadding = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            const daysInPrevMonth = prevLastDay.getDate();
            
            const grid = document.getElementById('calendarGrid');
            grid.innerHTML = '';
            
            const weekDaysFull = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];
            weekDaysFull.forEach((day, index) => {
                const header = document.createElement('div');
                header.className = `weekday-header ${index === 0 || index === 6 ? 'weekend' : ''}`;
                header.textContent = day;
                grid.appendChild(header);
            });
            
            for (let i = startPadding - 1; i >= 0; i--) {
                const day = daysInPrevMonth - i;
                const cell = createDayCell(new Date(year, month - 1, day), true);
                grid.appendChild(cell);
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const cell = createDayCell(date, false);
                grid.appendChild(cell);
            }
            
            const remainingCells = (7 - ((startPadding + daysInMonth) % 7)) % 7;
            for (let day = 1; day <= remainingCells; day++) {
                const cell = createDayCell(new Date(year, month + 1, day), true);
                grid.appendChild(cell);
            }
            
            updateMonthTerms();
        }

        function createDayCell(date, isOtherMonth) {
            const cell = document.createElement('div');
            cell.className = 'calendar-day';
            if (isOtherMonth) cell.classList.add('other-month');
            
            const dateStr = formatDate(date);
            const todayStr = formatDate(new Date());
            const selectedStr = formatDate(selectedDate);
            
            if (dateStr === todayStr) cell.classList.add('today');
            if (dateStr === selectedStr) cell.classList.add('selected');
            
            const lunarData = getLunarData(date);
            const dayDetail = getDayDetail(date);
            const terms = getSolarTerms(date, date);
            
            if (dayDetail && !dayDetail.work) {
                cell.classList.add('holiday');
            }
            
            let lunarText = '';
            if (lunarData) {
                lunarText = lunarData.lunarDay === 1 ? lunarData.lunarMonCN : lunarData.lunarDayCN;
            }
            
            let workIndicator = '';
            if (dayDetail) {
                if (dayDetail.work && (date.getDay() === 0 || date.getDay() === 6)) {
                    workIndicator = '<span class="work-indicator work">Áè≠</span>';
                } else if (!dayDetail.work && date.getDay() >= 1 && date.getDay() <= 5) {
                    workIndicator = '<span class="work-indicator rest">‰ºë</span>';
                }
            }
            
            let badges = '';
            if (dayDetail && !dayDetail.work) badges += '<span class="badge holiday"></span>';
            if (terms.length > 0) badges += '<span class="badge term"></span>';
            
            cell.innerHTML = `
                ${workIndicator}
                <div class="day-badges">${badges}</div>
                <div class="solar-num">${date.getDate()}</div>
                <div class="lunar-num">${lunarText}</div>
            `;
            
            cell.addEventListener('click', () => {
                selectedDate = date;
                renderCalendar();
                updateSelectedInfo(date);
            });
            
            return cell;
        }

        function changeMonth(delta) {
            currentDate.setMonth(currentDate.getMonth() + delta);
            renderCalendar();
        }

        function goToToday() {
            currentDate = new Date();
            selectedDate = new Date();
            renderCalendar();
            updateSelectedInfo(selectedDate);
        }

        function openSettings() {
            document.getElementById('settingsOverlay').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settingsOverlay').classList.remove('active');
        }

        function closeSettingsOnOverlay(event) {
            if (event.target === event.currentTarget) {
                closeSettings();
            }
        }

        function updateThemeButtons() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            document.getElementById('btnLight').classList.toggle('active', currentTheme === 'light');
            document.getElementById('btnDark').classList.toggle('active', currentTheme === 'dark');
        }

        function setTheme(theme, skipSave = false) {
            document.documentElement.setAttribute('data-theme', theme);
            if (!skipSave && !followSystemTheme) {
                localStorage.setItem('theme', theme);
            }
            updateThemeButtons();
        }

        function toggleFollowSystem() {
            followSystemTheme = !followSystemTheme;
            const toggle = document.getElementById('followSystem');
            toggle.classList.toggle('active', followSystemTheme);
            
            localStorage.setItem('followSystem', followSystemTheme);
            
            if (followSystemTheme) {
                const isDark = systemDarkMode.matches;
                setTheme(isDark ? 'dark' : 'light', true);
            }
        }
        function applyFontSize(size) {
            currentFontSize = size;
            document.body.style.fontSize = size + 'px';
            document.getElementById('currentFontDisplay').textContent = size + 'px';
            document.getElementById('customFontSize').value = size;
            localStorage.setItem('fontSize', size);
        }

        function setFontSize(size, btn) {
            applyFontSize(size);
            updateFontButtons(btn);
        }

        function updateFontButtons(activeBtn) {
            if (!activeBtn) {
                const buttons = document.querySelectorAll('.size-btn');
                const sizeMap = { 14: 0, 16: 1, 18: 2 };
                const index = sizeMap[currentFontSize];
                if (index !== undefined) {
                    activeBtn = buttons[index];
                }
            }
            
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
            if (activeBtn) activeBtn.classList.add('active');
        }

        function applyCustomFont() {
            const input = document.getElementById('customFontSize');
            const size = parseInt(input.value);
            if (size >= 10 && size <= 32) {
                applyFontSize(size);
                document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
            } else {
                alert('ËØ∑ËæìÂÖ• 10-32 ‰πãÈó¥ÁöÑÊï¥Êï∞');
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') changeMonth(-1);
            if (e.key === 'ArrowRight') changeMonth(1);
            if (e.key === 'Home') goToToday();
            if (e.key === 'Escape') closeSettings();
        });
    </script>
</body>
</html>